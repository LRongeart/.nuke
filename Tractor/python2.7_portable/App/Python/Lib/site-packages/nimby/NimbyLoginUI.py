#
# ____________________________________________________________________ 
# Copyright (C) 2011 Pixar Animation Studios. All rights reserved.
#
# The information in this file is provided for the exclusive use of the
# software licensees of Pixar.  It is UNPUBLISHED PROPRIETARY SOURCE CODE
# of Pixar Animation Studios; the contents of this file may not be disclosed
# to third parties, copied or duplicated in any form, in whole or in part,
# without the prior written permission of Pixar Animation Studios.
# Use of copyright notice is precautionary and does not imply publication.
#
# PIXAR DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE, INCLUDING
# ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN NO EVENT
# SHALL PIXAR BE LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES
# OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,
# WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION,
# ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS
# SOFTWARE.
# ____________________________________________________________________ 
#


import PySide.QtGui

class NimbyLoginUI(PySide.QtGui.QDialog):

    def __init__(self, user):
        apply(PySide.QtGui.QDialog.__init__, (self, ))
        
        self.setWindowTitle("NIMBY LOGIN")
        self.setModal(True)
                
        self.m_titleLabel = PySide.QtGui.QLabel(
            "Please log-in to the Tractor Engine")
        self.m_statusLabel = PySide.QtGui.QLabel("")    
            
        self.m_userNameLabel = PySide.QtGui.QLabel("Username")
        self.m_userNameTextBox = PySide.QtGui.QLineEdit()
        self.m_userNameTextBox.setText(user)
        self.m_userNameLabel.setBuddy(self.m_userNameTextBox)
        
        self.m_passwdLabel = PySide.QtGui.QLabel("Password")
        self.m_passwdTextBox = PySide.QtGui.QLineEdit()
        self.m_passwdTextBox.setEchoMode(PySide.QtGui.QLineEdit.Password)
        self.m_passwdLabel.setBuddy(self.m_passwdTextBox)
        
        buttons = PySide.QtGui.QDialogButtonBox(self)
        buttons.addButton(PySide.QtGui.QDialogButtonBox.Ok)
        buttons.button(PySide.QtGui.QDialogButtonBox.Ok).setText("Login")
        buttons.button(PySide.QtGui.QDialogButtonBox.Ok).clicked.connect(
            self.enter)
        
        gridLayout = PySide.QtGui.QGridLayout(self)
        gridLayout.addWidget(self.m_titleLabel, 0, 0, 1, 2)
        gridLayout.addWidget(self.m_userNameLabel, 1, 0)
        gridLayout.addWidget(self.m_userNameTextBox, 1, 1)
        gridLayout.addWidget(self.m_passwdLabel, 2, 0)
        gridLayout.addWidget(self.m_passwdTextBox, 2, 1)
        gridLayout.addWidget(self.m_statusLabel, 3, 0, 1, 2)
        gridLayout.addWidget(buttons, 4, 0, 1, 2)
        
        self.setLayout(gridLayout)
        
    def enter(self, *args):
        self.close()
        
    def Show(self, error=""):
        self.m_statusLabel.setStyleSheet("QLabel { color: 'red' }")
        self.m_statusLabel.setText(error)
        if error != "":
            self.m_userNameTextBox.clear()
            self.m_passwdTextBox.clear()
        self.show()    
        
    def GetName(self):
        return self.m_userNameTextBox.text()
            
    def GetPasswd(self):
        return self.m_passwdTextBox.text()
